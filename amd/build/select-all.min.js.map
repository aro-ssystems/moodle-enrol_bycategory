{"version":3,"file":"select-all.min.js","sources":["../src/select-all.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * JS handler for select all functionality\n *\n * @copyright  2022 Matthias Tylkowski <matthias.tylkowski@b-tu.de>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport Selectors from './local/select-all/selectors';\n\nconst registerEventListeners = () => {\n    const masterElem = document.querySelector(Selectors.selectors.masterSelector);\n    const checkboxElems = Array.from(document.querySelectorAll(Selectors.selectors.checkboxesSelector));\n\n    if (!masterElem) {\n        throw new Error('select all element doesn\\'t exist');\n    }\n\n    masterElem.addEventListener('change', e => {\n        const state = e.target.checked;\n        if (state === true) {\n            checkAll();\n        } else {\n            uncheckAll();\n        }\n    });\n\n    document.addEventListener('change', e => {\n        // Ignore masterElem or other Elements which are not in checkBoxElems Array.\n        if (e.target === masterElem || checkboxElems.includes(e.target) === false) {\n            return;\n        }\n\n        const allChecked = checkboxElems.every((elem) => elem.checked === true);\n        const allUnchecked = checkboxElems.every((elem) => elem.checked === false);\n\n        if (allChecked === true) {\n            masterToChecked();\n            return;\n        }\n\n        if (allUnchecked === true) {\n            masterToUnchecked();\n            return;\n        }\n\n        masterToIndeterminate();\n    });\n\n    const checkAll = () => {\n        checkboxElems.forEach((elem) => {\n            elem.checked = true;\n        });\n    };\n\n    const uncheckAll = () => {\n        checkboxElems.forEach((elem) => {\n            elem.checked = false;\n        });\n    };\n\n    const masterToIndeterminate = () => {\n        masterElem.indeterminate = true;\n        masterElem.checked = false;\n    };\n\n    const masterToChecked = () => {\n        masterElem.indeterminate = false;\n        masterElem.checked = true;\n    };\n\n    const masterToUnchecked = () => {\n        masterElem.indeterminate = false;\n        masterElem.checked = false;\n    };\n};\n\nexport const init = () => {\n    registerEventListeners();\n};\n"],"names":["masterElem","document","querySelector","Selectors","selectors","masterSelector","checkboxElems","Array","from","querySelectorAll","checkboxesSelector","Error","addEventListener","e","target","checked","checkAll","uncheckAll","includes","allChecked","every","elem","allUnchecked","masterToIndeterminate","masterToUnchecked","masterToChecked","forEach","indeterminate","registerEventListeners"],"mappings":";;;;;;8JA2FoB,YAnEW,eACrBA,WAAaC,SAASC,cAAcC,mBAAUC,UAAUC,gBACxDC,cAAgBC,MAAMC,KAAKP,SAASQ,iBAAiBN,mBAAUC,UAAUM,yBAE1EV,iBACK,IAAIW,MAAM,oCAGpBX,WAAWY,iBAAiB,UAAU,SAAAC,IAEpB,IADAA,EAAEC,OAAOC,QAEnBC,WAEAC,gBAIRhB,SAASW,iBAAiB,UAAU,SAAAC,MAE5BA,EAAEC,SAAWd,aAAmD,IAArCM,cAAcY,SAASL,EAAEC,aAIlDK,WAAab,cAAcc,OAAM,SAACC,aAA0B,IAAjBA,KAAKN,WAChDO,aAAehB,cAAcc,OAAM,SAACC,aAA0B,IAAjBA,KAAKN,YAErC,IAAfI,YAKiB,IAAjBG,aAKJC,wBAJIC,oBALAC,0BAYFT,SAAW,WACbV,cAAcoB,SAAQ,SAACL,MACnBA,KAAKN,SAAU,MAIjBE,WAAa,WACfX,cAAcoB,SAAQ,SAACL,MACnBA,KAAKN,SAAU,MAIjBQ,sBAAwB,WAC1BvB,WAAW2B,eAAgB,EAC3B3B,WAAWe,SAAU,GAGnBU,gBAAkB,WACpBzB,WAAW2B,eAAgB,EAC3B3B,WAAWe,SAAU,GAGnBS,kBAAoB,WACtBxB,WAAW2B,eAAgB,EAC3B3B,WAAWe,SAAU,GAKzBa"}